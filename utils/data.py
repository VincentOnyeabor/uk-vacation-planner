# UK Cities data
UK_CITIES = {
    "London": {
        "region": "England",
        "highlights": ["Big Ben", "Tower Bridge", "British Museum", "Buckingham Palace", "Covent Garden", "Hyde Park"],
        "transport": "Extensive tube network, buses, taxis, Boris bikes",
        "avg_daily_cost": {"budget": 60, "mid": 120, "luxury": 250},
        "description": "Capital city with world-class museums, royal palaces, and vibrant culture"
    },
    "Edinburgh": {
        "region": "Scotland", 
        "highlights": ["Edinburgh Castle", "Royal Mile", "Arthur's Seat", "Princes Street", "Holyrood Palace", "Grassmarket"],
        "transport": "Buses, trams, walking-friendly city center",
        "avg_daily_cost": {"budget": 50, "mid": 100, "luxury": 200},
        "description": "Historic Scottish capital with medieval Old Town and Georgian New Town"
    },
    "Manchester": {
        "region": "England",
        "highlights": ["Manchester United Stadium", "Northern Quarter", "Science Museum", "Castlefield", "Deansgate", "Chinatown"],
        "transport": "Metrolink tram system, buses, city center walkable",
        "avg_daily_cost": {"budget": 45, "mid": 90, "luxury": 180},
        "description": "Industrial heritage city with vibrant music scene and modern attractions"
    },
    "Bath": {
        "region": "England",
        "highlights": ["Roman Baths", "Bath Abbey", "Royal Crescent", "Pulteney Bridge", "Thermae Bath Spa", "Assembly Rooms"],
        "transport": "Compact city, mostly walkable, local buses",
        "avg_daily_cost": {"budget": 50, "mid": 95, "luxury": 190},
        "description": "UNESCO World Heritage city famous for Georgian architecture and Roman baths"
    },
    "York": {
        "region": "England",
        "highlights": ["York Minster", "Shambles", "City Walls", "Railway Museum", "Jorvik Centre", "Clifford's Tower"],
        "transport": "Historic city center walkable, local buses",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 170},
        "description": "Medieval walled city with Viking heritage and stunning Gothic cathedral"
    },
    "Cardiff": {
        "region": "Wales",
        "highlights": ["Cardiff Castle", "Millennium Stadium", "Cardiff Bay", "National Museum", "Llandaff Cathedral", "Bute Park"],
        "transport": "City center walkable, buses, Cardiff Bay water taxi",
        "avg_daily_cost": {"budget": 40, "mid": 80, "luxury": 160},
        "description": "Welsh capital with castle, modern waterfront, and rich cultural heritage"
    },
    "Cambridge": {
        "region": "England",
        "highlights": ["Cambridge University", "King's College Chapel", "Punting", "Fitzwilliam Museum", "The Backs", "Market Square"],
        "transport": "Cycling city, walkable center, buses",
        "avg_daily_cost": {"budget": 50, "mid": 90, "luxury": 180},
        "description": "Historic university city with beautiful colleges and riverside punting"
    },
    "Oxford": {
        "region": "England",
        "highlights": ["Oxford University", "Bodleian Library", "Christ Church", "Ashmolean Museum", "Carfax Tower", "Covered Market"],
        "transport": "Walkable center, buses, cycling popular",
        "avg_daily_cost": {"budget": 50, "mid": 95, "luxury": 185},
        "description": "City of dreaming spires with world-renowned university and historic architecture"
    },
    "Brighton": {
        "region": "England",
        "highlights": ["Brighton Pier", "Royal Pavilion", "The Lanes", "Brighton Beach", "British Airways i360", "North Laine"],
        "transport": "Walkable city center, buses, bike sharing",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 175},
        "description": "Seaside resort town with Regency architecture and bohemian culture"
    },
    "Liverpool": {
        "region": "England",
        "highlights": ["Albert Dock", "The Beatles Story", "Cavern Club", "Liverpool Cathedral", "Walker Art Gallery", "Mathew Street"],
        "transport": "City center walkable, buses, Merseyrail",
        "avg_daily_cost": {"budget": 40, "mid": 80, "luxury": 160},
        "description": "Maritime city famous for The Beatles, football, and UNESCO World Heritage waterfront"
    },
    "Glasgow": {
        "region": "Scotland",
        "highlights": ["Glasgow Cathedral", "Kelvingrove Museum", "West End", "Merchant City", "Riverside Museum", "Buchanan Street"],
        "transport": "Subway system, buses, walkable city center",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 170},
        "description": "Scotland's largest city with Victorian architecture and vibrant arts scene"
    },
    "Bristol": {
        "region": "England",
        "highlights": ["Clifton Suspension Bridge", "SS Great Britain", "Harbourside", "Street Art", "Bristol Cathedral", "Cabot Circus"],
        "transport": "Buses, walking, cycling routes",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 170},
        "description": "Historic port city with maritime heritage and contemporary culture"
    },
    "Chester": {
        "region": "England",
        "highlights": ["Chester Cathedral", "The Rows", "City Walls", "Roman Amphitheatre", "Eastgate Clock", "Chester Zoo"],
        "transport": "Compact city center, walkable, local buses",
        "avg_daily_cost": {"budget": 40, "mid": 80, "luxury": 160},
        "description": "Medieval city with Roman walls and unique covered galleries"
    },
    "Canterbury": {
        "region": "England",
        "highlights": ["Canterbury Cathedral", "Canterbury Tales", "St. Augustine's Abbey", "Westgate Towers", "River Stour", "Historic High Street"],
        "transport": "Walkable historic center, buses, cycling",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 165},
        "description": "Historic cathedral city and UNESCO World Heritage site"
    },
    "Windsor": {
        "region": "England",
        "highlights": ["Windsor Castle", "Eton College", "Windsor Great Park", "Legoland", "Thames Path", "Long Walk"],
        "transport": "Walkable town center, buses, river boats",
        "avg_daily_cost": {"budget": 55, "mid": 100, "luxury": 190},
        "description": "Royal town home to Windsor Castle and beautiful riverside setting"
    },
    "Stratford-upon-Avon": {
        "region": "England",
        "highlights": ["Shakespeare's Birthplace", "Royal Shakespeare Company", "Anne Hathaway's Cottage", "Holy Trinity Church", "Harvard House", "Butterfly Farm"],
        "transport": "Walkable town center, buses, river cruises",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 170},
        "description": "Shakespeare's birthplace with Tudor architecture and literary heritage"
    },
    "Inverness": {
        "region": "Scotland",
        "highlights": ["Inverness Castle", "Loch Ness", "Culloden Battlefield", "Inverness Cathedral", "River Ness", "Clava Cairns"],
        "transport": "Walkable center, buses, Highland tours",
        "avg_daily_cost": {"budget": 40, "mid": 75, "luxury": 150},
        "description": "Highland capital and gateway to the Scottish Highlands and Loch Ness"
    },
    "St. Andrews": {
        "region": "Scotland",
        "highlights": ["St. Andrews Cathedral", "Old Course Golf", "University of St. Andrews", "West Sands Beach", "St. Andrews Castle", "Pier Walk"],
        "transport": "Walkable town, buses, cycling",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 175},
        "description": "Historic university town famous for golf and royal connections"
    },
    "Nottingham": {
        "region": "England",
        "highlights": ["Nottingham Castle", "City of Caves", "Sherwood Forest", "Lace Market", "Robin Hood Statue", "Wollaton Hall"],
        "transport": "Tram system, buses, walkable center",
        "avg_daily_cost": {"budget": 40, "mid": 80, "luxury": 160},
        "description": "Robin Hood's legendary home with caves, castle, and medieval heritage"
    },
    "Salisbury": {
        "region": "England",
        "highlights": ["Salisbury Cathedral", "Stonehenge", "Old Sarum", "Mompesson House", "Market Square", "Salisbury Museum"],
        "transport": "Walkable center, buses, Stonehenge tours",
        "avg_daily_cost": {"budget": 45, "mid": 85, "luxury": 165},
        "description": "Cathedral city near Stonehenge with medieval streets and spire"
    }
}

def get_travel_options(cities):
    """Generate travel options between cities"""
    if len(cities) == 1:
        return {
            "From London": "Train (2-4 hours), Car rental, Coach",
            "Local Transport": UK_CITIES[cities[0]]["transport"]
        }
    else:
        return {
            "Multi-city travel": "Train connections, Car rental recommended for flexibility",
            "Intercity transport": "National Rail, Coach services, Domestic flights for longer distances"
        }

def calculate_budget(cities, duration, group_size, travel_style):
    """Calculate estimated budget"""
    total_daily_cost = 0
    
    for city in cities:
        city_cost = UK_CITIES[city]["avg_daily_cost"][travel_style]
        total_daily_cost += city_cost
    
    avg_daily_cost = total_daily_cost / len(cities)
    
    if group_size > 1:
        avg_daily_cost *= (0.85 if group_size <= 4 else 0.8)
    
    total_cost = avg_daily_cost * duration * group_size
    
    return {
        "daily_per_person": round(avg_daily_cost, 2),
        "total_trip": round(total_cost, 2),
        "breakdown": {
            "Accommodation": round(total_cost * 0.4, 2),
            "Food & Drink": round(total_cost * 0.3, 2),
            "Activities": round(total_cost * 0.2, 2),
            "Transport": round(total_cost * 0.1, 2)
        }
    }